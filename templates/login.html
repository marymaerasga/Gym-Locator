<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>GYM Locator Zamboanga</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="" name="keywords">
  <meta content="" name="description">

  <!-- Favicon -->
  <link href="/assets/img/favicon.ico" rel="icon">

  <!-- Google Web Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Nunito:wght@600;700;800&display=swap"
    rel="stylesheet">

  <!-- Icon Font Stylesheet -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Libraries Stylesheet -->
  <link href="/assets/lib/animate/animate.min.css" rel="stylesheet">
  <link href="/assets/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="/assets/lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

  <!-- Customized Bootstrap Stylesheet -->
  <link href="/assets/css/bootstrap.min.css" rel="stylesheet">

  <!-- Template Stylesheet -->
  <link href="/assets/css/style.css" rel="stylesheet">
</head>

<body>
  <div class="container-fluid bg-primary hero-header" style="height: 100vh;">
    <div class="container d-flex justify-content-center align-items-center py-5 h-100">
      <div class="card bg-transparent border-0">
        <div>
          <div class="row mb-2 mt-2">
            <h2 class="text-white">Welcome <span style="color: #86B817;"> Back!</span></h2>
            <p>Please sign in to continue</p>
          </div>
          <div class="form-floating mb-3">
            <input type="email" class="form-control" id="email" placeholder="name@example.com">
            <label for="floatingInput">Email address</label>
          </div>
          <div class="form-floating mb-3">
            <input type="password" class="form-control" id="password" placeholder="Password">
            <label for="floatingPassword">Password</label>
          </div>
          <!-- 2 column grid layout for inline styling -->
          <div class="row mb-4">
            <div class="col">
              <!-- Checkbox -->
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="form2Example31" checked />
                <label class="form-check-label" for="form2Example31"> Remember me </label>
              </div>
            </div>

            <div class="col text-end">
              <!-- Simple link -->
              <a href="#!" onclick="Forgot()">Forgot password?</a>
            </div>
          </div>

          <!-- Submit button -->
          <button type="submit" class="btn btn-primary btn-block w-100 mx-auto  mb-2" onclick="Login()">
            Log in
          </button>

          <!-- Register buttons -->
          <div class="text-center">
            <p>Not a member? <a href="/GYM">Register</a></p>
            <!---<p>or sign up with:</p>
              <button type="button" class="btn btn-link btn-floating mx-1">
                <i class="fab fa-facebook-f"></i>
              </button>

              <button type="button" class="btn btn-link btn-floating mx-1">
                <i class="fab fa-google"></i>
              </button>
            </div>
            -->
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="deleteModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
      aria-labelledby="staticBackdropLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="staticBackdropLabel">
              Sign in
            </h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
              onclick="Closed()"></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="form-floating mb-3">
                <label for="html">GYM Owner</label>
                <input type="radio" id="html" name="fav_language" value="Owner">
              </div>
              <div class="form-floating mb-3">
                <label for="html">Trainer</label>
                <input type="radio" id="html" name="fav_language" value="Trainer">
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn-primary text-white shadow-sm" onclick="Select()">
              Select
            </button>
          </div>
        </div>
      </div>
    </div>


    <div class="modal fade" id="forgotModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
      aria-labelledby="staticBackdropLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="staticBackdropLabel">
              Forgot Password
            </h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
              onclick="Closed1()"></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="form-floating mb-3">

                <input type="email" id="pass_email" placeholder="Email">
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn-primary text-white shadow-sm" onclick="Submit()">
              Submit
            </button>
          </div>
        </div>
      </div>
    </div>
</body>

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/assets/lib/wow/wow.min.js"></script>
<script src="/assets/lib/easing/easing.min.js"></script>
<script src="/assets/lib/waypoints/waypoints.min.js"></script>
<script src="/assets/lib/owlcarousel/owl.carousel.min.js"></script>
<script src="/assets/lib/tempusdominus/js/moment.min.js"></script>
<script src="/assets/lib/tempusdominus/js/moment-timezone.min.js"></script>
<script src="/assets/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

<!-- Template Javascript -->
<script src="/assets/js/main.js"></script>
<script src="/assets/js/dashboard.js"></script>

<script src="https://code.jquery.com/jquery-3.6.1.min.js"
  integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
<script>

  $(document).ready(function () {
    Modal()
  });

  function Forgot() {
    $("#forgotModal").modal("show");
  }

  function Modal() {
    $("#deleteModal").modal("show");
  }
  function Login() {
    var email = $("#email").val();
    var password = $("#password").val();
    var pos = localStorage.getItem("pos")

    if (email == "" || password == "" || pos == "") {
      $("#email").val("");
      $("#password").val("");
      Swal.fire({
        toast: true,
        position: "center",
        icon: "warning",
        title: "Please Complete Required Details",
        showConfirmButton: false,
        timer: 3000,
      });
    } else {
      $.ajax({
        url: "/api/login",
        data: {
          email: email,
          password: password,
          position: pos,
        },
        success: function (res) {
          var result = JSON.parse(res).results;
          var user = JSON.parse(res).reports;
          if (result == 1) {
            Swal.fire({
              toast: true,
              position: "center",
              icon: "success",
              title: "Login Successful",
              showConfirmButton: false,
              timer: 3000,
            }).then(function () {
              window.location.replace("/GymDashboard");
            });
          } else if (result == 2) {
            Swal.fire({
              toast: true,
              position: "center",
              icon: "success",
              title: "Login Successful",
              showConfirmButton: false,
              timer: 3000,
            }).then(function () {
              window.location.replace("/TrainerDashboard");
            });
          } else {
            Swal.fire({
              toast: true,
              position: "center",
              icon: "warning",
              title: "Please Check your Email and Password!",
              showConfirmButton: false,
              timer: 3000,
            });
            $("#email").val("");
            $("#password").val("");
          }
        },
      });
    }
  }

  function Closed() {
    localStorage.removeItem("pos")
    window.location.replace("/")
  }

  function Closed1() {
    $("#forgotModal").modal("hide");
  }

  function Select() {
    var test = $('input[name="fav_language"]:checked').val()
    localStorage.setItem("pos", test)
    $("#deleteModal").modal("hide");
  }

  function Submit() {
    var pos = localStorage.getItem("pos")
    var email = $("#pass_email").val()

    if (email == "") {
      Swal.fire({
        toast: true,
        position: "center",
        icon: "warning",
        title: "Please Complete Required Details",
        showConfirmButton: false,
        timer: 3000,
      });
    } else {
      $.ajax({
        url: "/api/email",
        data: {
          email: email,
          position: pos,
        },
        success: function (res) {
          var result = JSON.parse(res).results;
          var user = JSON.parse(res).reports;
          if (result == 1) {
            Swal.fire({
              toast: true,
              position: "center",
              icon: "success",
              title: "Change Password Successful",
              showConfirmButton: false,
              timer: 3000,
            }).then(function () {
              window.location.replace("/Login");
            });
          } else if (result == 2) {
            Swal.fire({
              toast: true,
              position: "center",
              icon: "success",
              title: "Change Password Successful",
              showConfirmButton: false,
              timer: 3000,
            }).then(function () {
              window.location.replace("/Login");
            });
          } else {
            Swal.fire({
              toast: true,
              position: "center",
              icon: "warning",
              title: "Check your Email",
              showConfirmButton: false,
              timer: 3000,
            }).then(function () {
              window.location.replace("/Login");
            });
          }
        },
      });
    }
  }
</script>



</html>